---
title: 'Sessions'
description: 'Manage interactive browser sessions and execute multiple tasks.'
---

<Note>
  Browser sessions consume credits based on duration and agent activity.
</Note>

## What are Sessions?

Sessions are the core of Smooth. They provide a persistent browser environment where you can execute multiple tasks, navigate manually, or interact directly with the page using JavaScript.

Instead of running isolated tasks, you can open a session and:
1. **Execute multiple steps**: Run several `run_task()` calls sequentially.
2. **Direct Browser Control**: Use `goto()`, `evaluate_js()`, and `extract()` for fine-grained control.
3. **Manual Interaction**: Access the `live_url()` to perform manual logins or checks.
4. **Persistent State**: Use a `profile_id` to maintain cookies and authentication across different sessions.

## Using Sessions

The recommended way to use sessions is via a context manager, which ensures the session is properly closed when you are done.

### Synchronous Usage

<CodeGroup>

```python Python
from smooth import SmoothClient

client = SmoothClient(api_key="cmzr-YOUR_API_KEY")

# Open a session (optionally with a profile for persistence)
with client.session(profile_id="my-session") as session:
    # 1. Navigate to a page
    session.goto("https://news.ycombinator.com")

    # 2. Run an automated task
    session.run_task("Find the top story and tell me its title")

    # 3. Perform a direct extraction
    data = session.extract(schema={
        "type": "object",
        "properties": {
            "story_title": {"type": "string"}
        }
    })

    print(f"Top story: {data['story_title']}")
    print(f"Session Result: {session.result()}")
```

</CodeGroup>

### Asynchronous Usage (Recommended)

For production environments, we recommend using the `SmoothAsyncClient`.

<CodeGroup>

```python Python
import asyncio
from smooth import SmoothAsyncClient

async def main():
    async with SmoothAsyncClient(api_key="cmzr-YOUR_API_KEY") as client:
        async with await client.session() as session:
            await session.goto("https://google.com")
            await session.run_task("Find the weather in London")
            result = await session.result()
            print(result)

asyncio.run(main())
```

</CodeGroup>

<Note>
  `client.run(task)` is a convenient shortcut for `with client.session() as session: session.run_task(task)`.
</Note>

## Session Methods

Once you have a `SessionHandle`, you can call the following methods:

<ResponseField name="run_task" type="method">
  Executes an autonomous agent task within the session.
  ```python
  session.run_task("Scroll to the bottom and click 'Next'")
  ```
</ResponseField>

<ResponseField name="goto" type="method">
  Navigates the browser to a specific URL.
  ```python
  session.goto("https://example.com")
  ```
</ResponseField>

<ResponseField name="evaluate_js" type="method">
  Evaluates JavaScript code in the browser context.
  ```python
  session.evaluate_js("() => document.title")
  ```
</ResponseField>

<ResponseField name="extract" type="method">
  Performs a structured extraction from the current page state.
  ```python
  session.extract(schema={"properties": {"price": {"type": "number"}}})
  ```
</ResponseField>

<ResponseField name="result" type="method">
  Returns the summary/result of the last task executed in the session.
</ResponseField>

<ResponseField name="live_url" type="method">
  Returns an interactive URL to view and control the browser manually.
</ResponseField>

## Parameters

All parameters available when opening a browser session via `client.session()`.

<ResponseField name="profile_id" type="string">
  The unique identifier for the browser profile. Use this to persist cookies and logins.
</ResponseField>

<ResponseField name="url" type="string">
  The starting URL for the session.
</ResponseField>

<ResponseField name="device" type="string">
  The device type used for the session: `mobile` (default) or `desktop`.
</ResponseField>

<ResponseField name="proxy_server" type="string">
  Proxy server address (e.g., `proxy.example.com`).
</ResponseField>

<ResponseField name="enable_recording" type="boolean">
  Enable video recording of the session. Default: `True`.
</ResponseField>

<ResponseField name="stealth_mode" type="boolean">
  Run the browser in stealth mode to avoid detection.
</ResponseField>


<ResponseField name="profile_id()" type="method">
  Returns ID of the session.
</ResponseField>

<ResponseField name="live_url()" type="method">
  Returns a live URL where you can interact with the browser (requires `live_view=True`).

  Set `interactive=True` to get an interactive view. 
  
  Set `embed=True` to get an embeddable view (ideal for iframes).
</ResponseField>


<ResponseField name="live_id()" type="method">
  Returns the live ID for the browser session. It can be passed to `.close_session` to close the session and save the browser profile.
</ResponseField>

## Close a browser session

To close a live browser session, simply call `.close_session`.

<CodeGroup>

```python Python
from smooth import SmoothClient

smooth_client = SmoothClient(api_key="cmzr-YOUR_API_KEY")

...  # open session

smooth_client.close_session(sesion_handle.live_id())
```

</CodeGroup>

<Note>
  If the browser session is not manually closed, the profile is saved automatically when the 5 minutes time limit is reached.
</Note>

